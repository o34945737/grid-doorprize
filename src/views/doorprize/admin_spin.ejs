<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Admin - Spin</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body class="container py-4">
  <div class="d-flex justify-content-between align-items-center">
    <div>
      <h2 class="mb-0">Spin Wheel Doorprize</h2>
      <div class="text-muted small">
        Peserta tersisa: <b><%= status.participantsLeft %></b> â€” Hadiah tersisa: <b><%= status.prizeLeft %></b>
      </div>
    </div>
    <div class="d-flex gap-2">
      <a href="/doorprize/admin" class="btn btn-outline-secondary btn-sm">Dashboard</a>
      <a href="/doorprize/admin/logout" class="btn btn-outline-secondary btn-sm">Logout</a>
    </div>
  </div>

  <% if (!status.isEnough) { %>
    <div class="alert alert-warning mt-3">
      Hadiah kurang untuk memastikan semua peserta dapat hadiah.
      Tambahkan hadiah dulu di menu <a href="/doorprize/admin/prizes">Kelola Hadiah</a>.
    </div>
  <% } %>

  <div class="mt-3 d-flex gap-2">
    <button id="btnSpin" class="btn btn-success" <%= status.isEnough ? "" : "disabled" %> >SPIN</button>
    <a class="btn btn-outline-primary" href="/doorprize/api/winners.csv">Export Winners CSV</a>
    <a class="btn btn-outline-secondary" href="/doorprize/admin/prizes">Kelola Hadiah</a>
    <a class="btn btn-outline-secondary" href="/doorprize/admin/participants">Peserta</a>
  </div>

  <div class="mt-4">
    <canvas id="wheel" width="520" height="520" style="max-width:100%;"></canvas>
  </div>

  <div class="mt-3">
    <h5>Hasil</h5>
    <div id="result" class="alert alert-info">Klik SPIN untuk mulai.</div>
  </div>

  <script>
    window.__SPIN_DISABLED__ = <%= status.isEnough ? "false" : "true" %>;
  </script>
  <script src="/public/js/spin.js"></script>
</body>
</html>
